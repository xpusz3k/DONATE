<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLS DONATE</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <nav>
        <header>DonationAPP</header>
    </nav>

    <div id="app">
        <div class="container">
            <div class="content">
                <!-- Strona pierwsza: Wprowadzenie danych użytkownika -->
                <div class="page-first show">
                    <div class="input">
                        <p>Wpisz swój nick</p>
                        <input type="text" id="input-name" maxlength="12" placeholder="Twój nick">
                    </div>
                    <div class="input">
                        <p>Twoja wiadomość</p>
                        <textarea id="input-message" maxlength="200" placeholder="Twoja wiadomość"></textarea>
                    </div>
                    <div class="input">
                        <button id="continue">Dalej</button>
                    </div>
                </div>

                <!-- Strona druga: Wybór płatności -->
                <div class="page-second">
                    <div class="payment-value">
                        <input id="payment-input-value" type="number" placeholder="Kwota minimum 1,00zł">
                    </div>
                    <div class="payment-selection">
                        <p>Wybierz sposób płatności</p>
                        <div class="selection">
                            <div class="payment-box" id="paypal-box">
                                <div class="checkbox"><i class="fas fa-check"></i></div>
                                <span>PayPal</span>
                            </div>
                        </div>
                    </div>
                    <div class="payment-confirm">
                        <!-- Poprawny formularz do PayPal -->
                        <form id="paypal-donate-form" action="https://www.paypal.com/donate" method="post" target="_blank">
                            <input type="hidden" name="business" value="kontakt.dajsonek@gmail.com">
                            <input type="hidden" name="no_recurring" value="0">
                            <input type="hidden" name="item_name" value="Donation to DAJSONEK">
                            <input type="hidden" name="currency_code" value="PLN">
                            <input type="hidden" name="amount" id="paypal-amount" value="">
                            <input type="hidden" name="return" value="http://yourdomain.com/success.html">
                            <input type="hidden" name="cancel_return" value="http://yourdomain.com/cancel.html">
                            <input type="hidden" name="notify_url" value="http://yourdomain.com/ipn_listener.php">
                            <button type="submit" id="payment-button">Przechodzę do płatności</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="ads-area">Miejsce na reklamę</div>
    </div>

    <footer>
        <p>&copy; 2024 DonationAPP | <a href="/terms">Regulamin</a></p>
    </footer>

    <script>
        document.getElementById('payment-button').addEventListener('click', function(event) {
            const inputName = document.getElementById('input-name').value;
            const inputMessage = document.getElementById('input-message').value;
            const paymentValue = document.getElementById('payment-input-value').value;

            // Walidacja: sprawdzenie czy użytkownik wprowadził wymagane dane
            if (!inputName || !paymentValue || paymentValue < 1) {
                alert('Proszę wprowadzić nazwę i kwotę minimalną 1 zł');
                event.preventDefault(); // Zapobiega wysłaniu formularza
                return;
            }

            // Ustawienie wartości kwoty w formularzu PayPal
            document.getElementById('paypal-amount').value = paymentValue;

            // Dynamicznie przekazanie dodatkowych danych do PayPal
            const paypalForm = document.getElementById('paypal-donate-form');
            paypalForm.action += `&custom=${encodeURIComponent(inputName)}&message=${encodeURIComponent(inputMessage)}`;
        });
    </script>
</body>
</html>
